<mat-toolbar color="accent" class="feedback-dialog-header">
    <div class="feedback-dialog-header-container">
        <h5 class="mat-headline-5 dialog-title">Feedback</h5>
        <mat-icon>feedback</mat-icon>
    </div>
</mat-toolbar>

<mat-dialog-content>

    <h6 class="mat-headline-6">Resumo do Resultado</h6>

    <div class="feedback-summary-container">
        <ng-container *ngFor="let location of locations; let index = index">
            <div class="feedback-summary">
                <h6 class="mat-body" *ngIf="locations.length > 1">{{index + 1}}ª Localização</h6>
                <h6 class="mat-body" *ngIf="locations.length === 1">Localização</h6>
                <p class="mat-small">Cidade: <b>{{location.city}}</b></p>
                <p class="mat-small">Bairro: <b>{{location.neighborhood}}</b></p>
                <p class="mat-small">Score: <b>{{location.score}}</b></p>
            </div>
        </ng-container>
    </div>

    <mat-divider class="divider"></mat-divider>

    <h6 class="mat-headline-6">Feedback</h6>

    <form
        id="feedbackForm"
        (ngSubmit)="sendFeedback()"
        [formGroup]="feedbackForm"
    >
        <div class="feedback-score-container">

            <p class="mat-body-1">Pouco realista</p>

            <mat-button-toggle-group class="button-toggle-group" formControlName="feedbackScore">
                <mat-button-toggle value="1"><span class="button-toggle-data">1</span></mat-button-toggle>
                <mat-button-toggle value="2"><span class="button-toggle-data">2</span></mat-button-toggle>
                <mat-button-toggle value="3"><span class="button-toggle-data">3</span></mat-button-toggle>
                <mat-button-toggle value="4"><span class="button-toggle-data">4</span></mat-button-toggle>
                <mat-button-toggle value="5"><span class="button-toggle-data">5</span></mat-button-toggle>
            </mat-button-toggle-group>

            <p class="mat-body-1">Muito realista</p>
        </div>

        <mat-form-field class="data-form" appearance="outline" color="accent">
            <mat-label>Observações</mat-label>
            <textarea
                    matInput
                    cdkTextareaAutosize
                    #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="3"
                    formControlName="comments"
                    maxlength="300"
            ></textarea>
            <mat-hint>Conte-nos com mais detalhes sobre o que achou.</mat-hint>
            <mat-error *ngIf="feedbackForm.controls['comments'].value.length > 300">Você atingiu o limite máximo de 300 caracteres.</mat-error>
        </mat-form-field>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end" class="feedback-dialog-actions">
    <button mat-flat-button [mat-dialog-close]="undefined">
        Cancelar
    </button>
    <button
            mat-flat-button
            color="accent"
            type="submit"
            form="feedbackForm"
            [disabled]="feedbackForm.invalid || loading"
    >
        Enviar
    </button>
    <mat-spinner
            *ngIf="loading"
            color="primary"
            style="height: 2rem; width: 2rem;margin-left: 1rem;"
    ></mat-spinner>
</mat-dialog-actions>